syntax = "proto3";
message CreateMailMessage {
    message RequestForParticipationMessage {
        message Survey {
            message Organizer {
            required string id = 1;
            required string email = 2;
            required string name = 3;
            }

            message QuestionReference {
                required string questionId = 1;
                required string choiceId = 2;
            }

            message Participant {
                required string id = 1;
                required string email = 2;
                required string name = 3;
                required repeated QuestionReference questionReferences = 4;
                required int32 order = 5; 
            }

            message Choice {
                required string id = 1;
                required string answer = 2;
                required bool selectable = 3;
                required int32 order = 4; 
            }

            message Question {
                required string id = 1;
                required string question = 2;
                required repeated Choice choices = 3;
                required int32 order = 4;
            }

            required string id = 1;
            required string name = 2;
            required string info = 3;
            required string link = 4;
            required Organizer organizer = 4;
            required repeated Participant participants = 5;
            required repeated Question questions = 6;
        }

        required string internalSurveyId = 1;
        required Survey survey = 2;
    }

    enum MailType {
        RequestForParticipation = 1
    }

    required string processId = 1;
    required MailType mailType = 2;
    oneof data {
        RequestForParticipationMessage requestForParticipation = 1;
    }
}
