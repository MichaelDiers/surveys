function apiCall(n,l,c={}){return new Promise((o,e)=>{const s=new XMLHttpRequest,t=(s.onreadystatechange=t=>{if(4===t.target.readyState)if(200===t.target.status){let e;if(t.target.responseText){const r=s.getResponseHeader("content-type");e=r.startsWith("text/html")?t.target.responseText:JSON.parse(t.target.responseText)}o(e)}else e()},s.open(l,n,!0),s.withCredentials=!0,c)["formData"];if(t){const a={};t.forEach((e,t)=>{a[t]=e});var r=JSON.stringify(a);console.log(r),s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("CSRF-Token",t.get("_csrf")),s.send(r)}else s.send()})}console.log("runs frame");const subViewForms=e=>{const t=e.querySelectorAll("form");t&&t.forEach(s=>{s.addEventListener("submit",e=>{e.preventDefault();var t=e.target.getAttribute("method");apiCall(e.target.getAttribute("action"),t,{formData:new FormData(e.target)}).then(o=>{const e=document.querySelectorAll(".sub-view");e&&e.forEach(r=>{r.querySelectorAll("form").forEach(e=>{if(e.id&&e.id===s.id){r.innerHTML=o;const t=r.querySelector("[name=pushStateUrl]");!t||(e=t.getAttribute("value"))&&window.history.pushState({},"",e)}})})}).catch(e=>console.log(e))})})},subViews=e=>{const t=e.querySelectorAll("[placeholder]");t&&t.forEach(r=>{var e=r.getAttribute("placeholder");r.removeAttribute("placeholder"),apiCall(e,"GET").then(e=>{const t=r;t.innerHTML=e,subViewForms(r),subViews(r)}).catch(e=>console.log(e))})};subViews(document);