function apiCall(r,a,n={}){return new Promise((o,e)=>{const s=new XMLHttpRequest,t=(s.onreadystatechange=t=>{if(4===t.target.readyState)if(200===t.target.status){let e;if(t.target.responseText){const r=s.getResponseHeader("content-type");e=r.startsWith("text/html")?t.target.responseText:JSON.parse(t.target.responseText)}o(e)}else e()},s.open(a,r,!0),s.withCredentials=!0,n)["formData"];t?(s.setRequestHeader("CSRF-Token",t.get("_csrf")),s.send(t)):s.send()})}console.log("runs frame");const subViewForms=e=>{const t=e.querySelectorAll("form");t&&t.forEach(o=>{o.addEventListener("submit",e=>{e.preventDefault();var t=e.target.getAttribute("method");apiCall(e.target.getAttribute("action"),t,{formData:new FormData(e.target)}).then(r=>{const e=document.querySelectorAll(".sub-view");e&&e.forEach(t=>{t.querySelectorAll("form").forEach(e=>{e.id&&e.id===o.id&&(t.innerHTML=r)})})}).catch(e=>console.log(e))})})},subViews=e=>{const t=e.querySelectorAll("[placeholder]");t&&t.forEach(r=>{var e=r.getAttribute("placeholder");r.removeAttribute("placeholder"),apiCall(e,"GET").then(e=>{const t=r;t.innerHTML=e,subViewForms(r),subViews(r)}).catch(e=>console.log(e))})};subViews(document);